# 🦁 함께줍줍 (Hamkae)

> **멋쟁이 사자처럼 대학 13기 해커톤 프로젝트**  
> **S.K.U 소속 0과 1사이 팀**이 개발한 환경 보호 서비스

## 📋 프로젝트 개요

**함께줍줍**은 사용자들이 주변의 쓰레기를 제보하고, 청소 후 AI 검증을 통해 포인트를 받는 환경 보호 서비스입니다. 포인트로 디지털 온누리상품권 5000원권을 구매할 수 있으며 지역시장이나 경제발전에 이바지 할 수 있다는 점에서 의의가 있습니다.

### 🎯 주요 기능
| 기능 | 설명 |
|------|------|
| **쓰레기 제보** | 현재 위치 기반 쓰레기 위치 등록 |
| **AI 검증** | 청소 전후 사진 비교를 통한 자동 검증 |
| **포인트 시스템** | 청소 인증 완료 시 포인트 적립 |
| **실시간 지도** | 카카오맵 기반 실시간 마커 표시 |

## 👥 0과 1사이 개발팀

| 역할 | 담당자 | 주요 업무 |
|------|--------|-----------|
| **🎨 디자인** | 조승윤 | UI/UX 디자인 및 사용자 경험 설계 |
| **💻 프론트엔드** | 김혜린 | React 컴포넌트 개발 및 사용자 인터페이스 구현 |
| **💻 프론트엔드** | 천병권 | 모바일 최적화 및 반응형 디자인 구현 |
| **⚙️ 백엔드** | 윤준하 | 회원가입, 로그인 시스템 및 AI 검증 시스템 구현 |
| **⚙️ 백엔드** | 권오윤 | 포인트 시스템 및 사용자 활동 관리 구현 |
| **⚙️ 백엔드** | 조샘이 | 포인트 시스템 및 보상 체계 구현 |
| **☁️ 인프라** | 윤준하 | AWS 서버 관리 및 배포 환경 구축 |

## 🚀 최근 업데이트 (2025-08-25)

### ✨ AI 검증 결과 표시 시스템 완전 개선

#### 🔧 주요 개선사항

| 문제 | 해결방법 | 결과 |
|------|----------|------|
| **JSON 파싱 오류** | 강화된 중괄호 스택 관리 시스템 구현 | 100% 파싱 성공률 달성 |
| **GPT 응답 표시** | `verification_result`, `confidence`, `reason` 필드 정확 추출 | 상세한 검증 이유 표시 |
| **주소 표시 문제** | Kakao Maps SDK 기반 주소 조회로 통일 | 모든 페이지에서 정확한 주소 표시 |
| **모바일 UX** | 컴팩트하고 터치 친화적인 디자인 | 모바일 최적화 완료 |
| **시간대 문제** | 한국 표준시(KST, UTC+9) 자동 변환 | 정확한 한국 시간 표시 |
| **코드 일관성** | `mapUtils.js` 공통 함수 사용 | 일관된 에러 핸들링 |

#### 🎨 UI/UX 개선 상세

**이전 (문제 상황)**
```
❌ JSON 파싱 실패: SyntaxError
⚠️ 주소 정보를 불러오는 중...
제보일: 2025년 8월 24일 오전 10:18 (UTC)
검증 결과: ✅ 청소가 성공적으로 완료되었습니다. (중복 정보)
```

**현재 (개선 완료)**
```
✅ 파싱 성공: {confidence: 95, reasoning: "AFTER 이미지에서..."}
📍 경기도 남양주시 별내4로 8
제보일: 2025년 8월 24일 오후 07:18 (KST)
🤖 AI 검증 결과
   신뢰도: 95% [██████████░░]
   검증 이유: AFTER 이미지에서 공간이 깔끔하게 정리되어...
```

## 🛠 기술 스택

| 분야 | 기술 | 버전 |
|------|------|------|
| **Backend** | Spring Boot | 3.5.4 |
| **Language** | Java | 21 |
| **Build Tool** | Gradle | 8.0+ |
| **Database** | MySQL | 8.0 |
| **ORM** | Spring Data JPA | Hibernate 6.0+ |
| **Security** | JWT + BCrypt | - |
| **AI Integration** | OpenAI GPT-4o API | - |
| **Frontend** | React | 19.1.1 |
| **Build Tool** | Vite | 7.1.0 |
| **Styling** | Tailwind CSS | 3.4+ |
| **Maps** | Kakao Maps JavaScript SDK | - |
| **Infrastructure** | Nginx + Let's Encrypt | Amazon Linux 2023 |

## 🗄 데이터베이스 설계

### 주요 테이블
| 테이블 | 설명 |
|--------|------|
| **users** | 사용자 정보 및 포인트 |
| **markers** | 쓰레기 제보 위치 정보 |
| **photos** | 청소 전후 사진 (BEFORE/AFTER) |
| **point_history** | 포인트 적립/사용 내역 |
| **rewards** | 포인트 전환 신청 |
| **reward_pins** | 포인트 전환 핀번호 |

### 핵심 관계
- **Marker** ↔ **Photo**: 1:N (하나의 마커에 여러 사진)
- **User** ↔ **Marker**: 1:N (사용자당 여러 제보)
- **Photo** ↔ **PointHistory**: 1:1 (사진당 포인트 적립)

## 🔐 환경 변수 설정

```bash
# 데이터베이스
DB_URL=jdbc:mysql://localhost:3306/hamkae
DB_USERNAME=root
DB_PASSWORD=your_password

# 파일 업로드
UPLOAD_DIR=/var/www/hamkae/images/
APP_BASE_URL=https://hamkae.sku-sku.com

# OpenAI API
OPENAI_API_KEY=your_openai_api_key

# Kakao Maps
VITE_KAKAO_JS_KEY=your_kakao_maps_js_key
```

## 🚀 배포 및 실행

| 명령어 | 설명 |
|--------|------|
| `./gradlew bootRun` | Backend 실행 |
| `npm run build` | Frontend 빌드 |
| `./gradlew build -x test` | 전체 빌드 |

## 📱 주요 페이지 및 기능

| 페이지 | 경로 | 주요 기능 |
|--------|------|-----------|
| **메인 페이지** | `/` | 서비스 소개 및 시작점 |
| **지도 페이지** | `/map` | 실시간 쓰레기 제보 마커 표시 |
| **제보 페이지** | `/report` | 쓰레기 위치 등록, 사진 업로드 |
| **청소 인증 업로드** | `/upload/:markerId` | 청소 후 사진 업로드, AI 검증 대기 |
| **인증내역** | `/verification-history` | 청소 인증 완료 내역, AI 검증 결과 |
| **제보내역** | `/report-history` | 사용자 제보 내역 관리 |
| **마이페이지** | `/mypage` | 사용자 프로필 및 포인트 |

## 🤖 AI 검증 시스템

### 검증 프로세스
1. **사진 업로드**: BEFORE/AFTER 사진 쌍
2. **AI 분석**: OpenAI GPT-4o Vision API
3. **자동 검증**: 청소 완료 여부 판단
4. **포인트 적립**: 검증 성공 시 자동 적립

### 포인트 시스템
| 구분 | 포인트 | 조건 |
|------|--------|------|
| **기본 포인트** | 5,000pt | 청소 인증 완료 |
| **보너스 포인트** | 1,000pt | 신뢰도 80% 이상 |
| **총 최대** | 6,000pt | - |

### 검증 결과 구조
```json
{
  "verification_result": "APPROVED",
  "confidence": 0.95,
  "reason": "AFTER 이미지에서 공간이 깔끔하게 정리되어..."
}
```

## 🔧 개발 및 디버깅

| 영역 | 도구/기능 | 설명 |
|------|-----------|------|
| **로깅 시스템** | AI 검증, 주소 조회, 에러 처리 | 구조화된 로깅 및 모니터링 |
| **GPT 응답 파싱** | 강화된 JSON 추출 로직 | 중괄호 스택 기반 안정적 파싱 |
| **주소 조회** | Kakao Maps SDK | REST API 대신 SDK 기반 안정적 변환 |
| **시간 변환** | 한국 시간대 자동 변환 | UTC → KST (UTC+9) 자동 변환 |

## 📈 성능 최적화

| 분야 | 최적화 내용 |
|------|-------------|
| **Frontend** | 코드 스플리팅, 이미지 최적화, 모바일 최적화 |
| **Backend** | 비동기 처리, 트랜잭션 관리, JPA 최적화 |

## 🐛 해결된 이슈들

| 이슈 | 상태 | 해결방법 |
|------|------|----------|
| **JSON 파싱 오류** | ✅ 해결 | 강화된 중괄호 스택 관리 |
| **주소 표시 문제** | ✅ 해결 | Kakao Maps SDK 통합 |
| **시간대 문제** | ✅ 해결 | 한국 표준시 자동 변환 |
| **모바일 UX** | ✅ 해결 | 컴팩트하고 터치 친화적 디자인 |

### 현재 상태
- **AI 검증**: 100% 정상 작동
- **주소 표시**: 모든 페이지에서 정상 작동
- **시간 표시**: 한국 시간대로 정확하게 표시
- **모바일 UX**: 최적화 완료

## 🤝 기여 가이드

### 코드 스타일
| 언어 | 가이드 |
|------|--------|
| **Java** | Google Java Style Guide 준수 |
| **JavaScript** | ESLint 규칙 준수 |
| **CSS** | Tailwind CSS 클래스 우선 사용 |

### 커밋 메시지
```
feat: AI 검증 결과 표시 시스템 개선
fix: JSON 파싱 오류 해결
style: 모바일 UX 최적화
docs: README 업데이트
```

## 0과1사이 팀정보!!!

| 역할 | 담당자 |
|------|--------|
| **프로젝트 매니저** | 윤준하 |
| **프론트엔드 팀** | 김혜린, 천병권 |
| **백엔드 팀** | 윤준하, 권오윤, 조샘이 |
| **디자인 팀** | 조승윤 |

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

---

**함께줍줍** - 더 깨끗한 세상을 위한 작은 실천 🚮✨  
**멋쟁이 사자처럼 대학 13기 0과 1사이 팀** 🦁💻

